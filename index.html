<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quotifyyyy</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="container">
        <div style="margin-bottom:0.5rem;color:#64748b;font-size:0.98rem;text-align:center;">
            Quotifyyyy is your daily source of inspiration. Browse and save your favorite motivational quotes!
        </div>
        <h1>Quotifyyyy</h1>
        <div class="quote-box">
            <p id="quote">"The best way to get started is to quit talking and begin doing."</p>
            <span id="author">- Walt Disney</span>
            <div style="margin-top:1rem;">
                <button id="prevQuote" class="theme-switch" style="margin-right:0.5rem;">Previous</button>
                <button id="nextQuote" class="theme-switch">Next</button>
                <button id="readAloudBtn" class="theme-switch" style="margin-left:0.5rem;">Read Aloud</button>
                <button id="favoriteBtn" class="theme-switch" style="margin-left:0.5rem;">Favorite</button>
            </div>
            <div style="margin-top:0.5rem;">
                <label style="cursor:pointer;"><input type="checkbox" id="showFavoritesToggle" style="margin-right:0.5rem;">Show Favorites Only</label>
            </div>
        </div>
        <button id="themeSwitch" class="theme-switch">Switch Theme</button>
        <a href="admin.html" class="theme-switch" style="display:inline-block;text-align:center;margin-top:0.5rem;">Admin Login</a>
    </div>
    <script>
        let quotes = JSON.parse(localStorage.getItem('quotes')) || [
            { text: "The best way to get started is to quit talking and begin doing.", author: "Walt Disney" },
            { text: "Success is not the key to happiness. Happiness is the key to success.", author: "Albert Schweitzer" },
            { text: "Your time is limited, so don't waste it living someone else's life.", author: "Steve Jobs" },
            { text: "The only place where success comes before work is in the dictionary.", author: "Vidal Sassoon" },
            { text: "Don't watch the clock; do what it does. Keep going.", author: "Sam Levenson" }
        ];
        let currentIndex = 0;
        let filteredQuotes = [...quotes];
        let favorites = JSON.parse(localStorage.getItem('favoriteQuotes')) || [];
        let showFavoritesOnly = false;
        function showQuote(index, animation) {
            if (filteredQuotes.length === 0) {
                document.getElementById('quote').textContent = "No quotes found.";
                document.getElementById('author').textContent = "";
                document.getElementById('favoriteBtn').style.visibility = 'hidden';
            } else {
                const quoteElem = document.getElementById('quote');
                const authorElem = document.getElementById('author');
                quoteElem.textContent = `"${filteredQuotes[index].text}"`;
                authorElem.textContent = `- ${filteredQuotes[index].author}`;
                document.getElementById('favoriteBtn').style.visibility = 'visible';
                updateFavoriteBtn();
                if (animation) {
                    quoteElem.classList.remove('swipe-left', 'swipe-right');
                    authorElem.classList.remove('swipe-left', 'swipe-right');
                    void quoteElem.offsetWidth; // force reflow
                    void authorElem.offsetWidth;
                    quoteElem.classList.add(animation);
                    authorElem.classList.add(animation);
                }
            }
        }
        if (quotes.length > 0) {
            currentIndex = Math.floor(Math.random() * quotes.length);
        }
        showQuote(currentIndex);

        document.getElementById('nextQuote').addEventListener('click', function() {
            if (quotes.length > 0) {
                currentIndex = (currentIndex + 1) % quotes.length;
                showQuote(currentIndex, 'swipe-left');
            }
        });
        document.getElementById('prevQuote').addEventListener('click', function() {
            if (quotes.length > 0) {
                currentIndex = (currentIndex - 1 + quotes.length) % quotes.length;
                showQuote(currentIndex, 'swipe-right');
            }
        });

        // Theme switch logic
        const themeSwitch = document.getElementById('themeSwitch');
        themeSwitch.addEventListener('click', () => {
            document.body.classList.toggle('dark-theme');
            if(document.body.classList.contains('dark-theme')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
        });
        // On load, check for saved theme
        if(localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-theme');
        }

        // Remove animation class after animation ends
        document.getElementById('quote').addEventListener('animationend', function() {
            this.classList.remove('swipe-left', 'swipe-right');
        });
        document.getElementById('author').addEventListener('animationend', function() {
            this.classList.remove('swipe-left', 'swipe-right');
        });

        // Read Aloud feature
        document.getElementById('readAloudBtn').addEventListener('click', function() {
            const quote = document.getElementById('quote').textContent;
            const author = document.getElementById('author').textContent;
            const utterance = new SpeechSynthesisUtterance(`${quote} ${author}`);
            window.speechSynthesis.speak(utterance);
        });

        function getCurrentQuoteObj() {
            return filteredQuotes[currentIndex];
        }

        function isFavorite(quoteObj) {
            return favorites.some(f => f.text === quoteObj.text && f.author === quoteObj.author);
        }

        function updateFavoriteBtn() {
            const btn = document.getElementById('favoriteBtn');
            const quoteObj = getCurrentQuoteObj();
            if (quoteObj && isFavorite(quoteObj)) {
                btn.textContent = '★ Favorited';
            } else {
                btn.textContent = '☆ Favorite';
            }
        }

        document.getElementById('favoriteBtn').addEventListener('click', function() {
            const quoteObj = getCurrentQuoteObj();
            if (!quoteObj) return;
            if (isFavorite(quoteObj)) {
                favorites = favorites.filter(f => !(f.text === quoteObj.text && f.author === quoteObj.author));
            } else {
                favorites.push(quoteObj);
            }
            localStorage.setItem('favoriteQuotes', JSON.stringify(favorites));
            updateFavoriteBtn();
        });

        document.getElementById('showFavoritesToggle').addEventListener('change', function(e) {
            showFavoritesOnly = e.target.checked;
            if (showFavoritesOnly) {
                filteredQuotes = quotes.filter(q => favorites.some(f => f.text === q.text && f.author === q.author));
            } else {
                filteredQuotes = [...quotes];
            }
            currentIndex = 0;
            showQuote(currentIndex);
        });
    </script>
</body>
</html> 